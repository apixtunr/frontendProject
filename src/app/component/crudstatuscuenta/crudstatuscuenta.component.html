<div class="container my-4">
	<h2 class="mb-4 text-center">Gestión de Status de Cuenta</h2>

	<div *ngIf="message" class="alert alert-info" role="alert">{{ message }}</div>

	<div class="card mb-4 shadow-sm">
		<div class="card-body">
			<form #statusForm="ngForm" (ngSubmit)="guardar()">
				<input type="hidden" name="idStatusCuenta" [(ngModel)]="nuevoStatus.idStatusCuenta" />

				<div class="row g-3">
					<div class="col-md-8">
						<label for="descripcion" class="form-label">Descripción</label>
						<input
							id="descripcion"
							name="descripcion"
							class="form-control"
							[(ngModel)]="nuevoStatus.descripcion"
							placeholder="Ingrese descripción del status"
							required
						/>
					</div>
				</div>

				<div class="mt-3 d-flex gap-2">
					<button type="submit" class="btn btn-primary" [disabled]="!nuevoStatus.descripcion || nuevoStatus.descripcion.trim() === ''">
						{{ editando ? 'Actualizar' : 'Crear' }}
					</button>
					<button type="button" class="btn btn-secondary" (click)="cancelar()" *ngIf="editando">Cancelar</button>
					<button type="button" class="btn btn-outline-secondary ms-auto" routerLink="/menu">Ir al menú</button>
				</div>
			</form>
		</div>
	</div>

	<div class="table-responsive">
		<table class="table table-striped table-bordered align-middle">
			<thead class="table-dark">
				<tr>
					<th>Descripción</th>
					<th>Fecha Creación</th>
					<th>Usuario Creación</th>
					<th>Fecha Modificación</th>
					<th>Usuario Modificación</th>
					<th class="sticky-buttons">Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let s of statusCuentas">
					<td>{{ s.descripcion }}</td>
					<td>{{ s.fechaCreacion | date:'dd/MM/yyyy HH:mm:ss':'GMT-6':'es-GT' }}</td>
					<td>{{ s.usuarioCreacion }}</td>
					<td>{{ s.fechaModificacion | date:'dd/MM/yyyy HH:mm:ss':'GMT-6':'es-GT' }}</td>
					<td>{{ s.usuarioModificacion }}</td>
					<td class="sticky-buttons">
						<div class="d-flex justify-content-center gap-2">
							<button class="btn btn-sm btn-info" (click)="editar(s)">Editar</button>
							<button class="btn btn-sm btn-danger" (click)="eliminar(s.idStatusCuenta)">Eliminar</button>
						</div>
					</td>
				</tr>
				<tr *ngIf="statusCuentas.length === 0">
					<td colspan="7" class="text-center">No hay estados registrados</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
